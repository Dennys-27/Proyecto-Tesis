<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard - Sistema de Gestión</title>

    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- DataTables Bootstrap 5 CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css"
    />

    <!-- Tu CSS personalizado -->
    <link rel="stylesheet" href="../assets/css/dashboard.css" />

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <!-- Dependencias para botones de exportación -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>

    <!-- Bootstrap 5 JS Bundle (Popper incluido) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Tus scripts personalizados -->
    <script src="../assets/js/dashboard.js" defer></script>
    <script src="../assets/js/dashboard/dashboard.js" defer></script>
  </head>
  <body>
    <div class="app-shell">
      <!-- ===============================
         SIDEBAR
    ================================ -->
      <aside class="sidebar" id="sidebar" aria-label="Barra lateral">
        <!-- Top del sidebar: Logo + botón cerrar -->
        <div class="sidebar-top">
          <div class="brand">
            <img
              src="../assets/img/Logo-UG-2016.png"
              alt="Logo UG"
              class="brand-logo"
            />
            <div class="brand-text">
              <div class="brand-title">UG - Gestión</div>
              <div class="brand-sub">Proyectos Curriculares</div>
            </div>
          </div>

          <!-- Botón único: X cerrar / abrir sidebar -->
          <button
            class="btn-icon collapse-btn"
            id="btnToggleSidebar"
            aria-label="Cerrar barra lateral"
            title="Cerrar menú"
          >
            <svg
              class="icon icon-close"
              viewBox="0 0 24 24"
              width="18"
              height="18"
              aria-hidden="true"
            >
              <path
                d="M6 6L18 18M6 18L18 6"
                stroke="currentColor"
                stroke-width="1.6"
                stroke-linecap="round"
                fill="none"
              />
            </svg>
          </button>
        </div>

        <!-- Navegación principal -->
        <nav class="nav" aria-label="Dashboard Estudiante">
          <ul>
            <li class="nav-item">
              <a href="#">
                <span class="icon">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                      d="M19 3H5c-1.1 0-2 .9-2 2v14l4-4h12c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"
                    />
                  </svg>
                </span>
                <span class="label">Mis Tareas</span>
              </a>
            </li>
            <li class="nav-item active">
              <a href="#">
                <span class="icon">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M5 20h14v-2H5v2zM5 4v12h14V4H5zm12 10H7V6h10v8z" />
                  </svg>
                </span>
                <span class="label">Subir Asignaciones</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="#">
                <span class="icon">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                      d="M20 2H4c-1.1 0-2 .9-2 2v16l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"
                      fill="currentColor"
                    />
                  </svg>
                </span>
                <span class="label">Chat</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="#">
                <span class="icon">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                      d="M12 4a8 8 0 00-8 8c0 3.31 2.69 6 6 6h2v2h2v-2h2a8 8 0 00-8-14zm-1 9H9V9h2v4zm4 0h-2V9h2v4z"
                      fill="currentColor"
                    />
                  </svg>
                </span>
                <span class="label">Copilot IA</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="#">
                <span class="icon">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                      d="M4 4h16v12H5.17L4 17.17V4zm2 4v2h12V8H6zm0 4v2h8v-2H6z"
                      fill="currentColor"
                    />
                  </svg>
                </span>
                <span class="label">Soporte</span>
              </a>
            </li>
          </ul>
        </nav>

        <!-- Resizer handle -->
        <div
          class="resizer"
          id="sidebarResizer"
          aria-hidden="true"
          title="Arrastra para cambiar ancho"
        ></div>

        <!-- Footer del sidebar -->
        <div class="sidebar-footer">
          <div class="small muted">Universidad de Guayaquil</div>
          <div class="copyright">© <span id="year"></span></div>
        </div>
      </aside>

      <!-- ===============================
         OVERLAY PARA MÓVIL
    ================================ -->
      <div id="overlay"></div>

      <!-- ===============================
         MAIN AREA
    ================================ -->
      <div class="main-area">
        <!-- NAVBAR / TOPBAR -->
        <header class="topbar">
          <div class="topbar-left">
            <button
              class="btn-icon"
              id="btnToggleSidebarMobile"
              aria-label="Abrir menú"
            >
              <svg viewBox="0 0 24 24" width="20" height="20">
                <path
                  d="M3 6h18M3 12h18M3 18h18"
                  stroke="currentColor"
                  stroke-width="1.6"
                  stroke-linecap="round"
                />
              </svg>
            </button>
            <div class="top-search">
              <input
                type="search"
                placeholder="Buscar..."
                aria-label="Buscar"
                id="searchInput"
              />
            </div>
          </div>

          <div class="topbar-right">
            <div class="user" id="userMenuToggle">
              <img
                src="../assets/img/masculino.png"
                alt="Usuario"
                class="avatar"
              />
              <div class="user-info">
                <div class="user-name">Profesor/a</div>
                <div class="user-role small muted">Ingeniería de Software</div>
              </div>
            </div>

            <!-- Menú desplegable -->
            <div class="user-menu" id="userMenu">
              <ul>
                <li><a href="#">Perfil</a></li>
                <li><a href="#">Salir</a></li>
                <li>
                  <a href="dashboard/dashboard_director.html">Director</a>
                </li>
                <li>
                  <a href="dashboard/dashboard _docente.html">Profesor</a>
                </li>
                <li>
                  <a href="dashboard/dashboard_estudiante.html">Estudiante</a>
                </li>
              </ul>
            </div>
          </div>
        </header>

        <!-- PAGE CONTENT -->
        <main class="content">
          <!-- Header -->
          <div
            class="page-header d-flex justify-content-between align-items-center flex-wrap"
          >
            <div>
              <h1 class="mb-1">Mis Tareas</h1>
              <p class="muted mb-0">
                Resumen de tus actividades y entregas pendientes.
              </p>
            </div>
          </div>

          <!-- Filtros -->
          <section class="filters mt-4">
            <div class="filters-box">
              <div class="filter-group">
                <input
                  type="text"
                  id="searchInput"
                  class="form-control"
                  placeholder="🔎 Buscar actividad..."
                />
              </div>

              <div class="filter-group">
                <label for="dateFrom">Desde</label>
                <input type="date" id="dateFrom" class="form-control" />
              </div>

              <div class="filter-group">
                <label for="dateTo">Hasta</label>
                <input type="date" id="dateTo" class="form-control" />
              </div>

              <div class="filter-group">
                <label for="sortFilter">Ordenar</label>
                <select id="sortFilter" class="form-control">
                  <option value="recent">Más recientes</option>
                  <option value="oldest">Más antiguas</option>
                </select>
              </div>

              <div class="filter-group">
                <button class="btn btn-primary w-100" id="applyFilters">
                  Aplicar
                </button>
              </div>
            </div>
          </section>

          <!-- Últimas Actividades -->
          <section class="latest-activities mt-4">
            <h2 class="mb-3">Actividades De Proyecto</h2>
            <div class="activities-list" id="activitiesList">
              <!-- Actividades dinámicas -->
            </div>

            <!-- Paginación -->
            <div class="pagination mt-3 d-flex justify-content-center gap-2">
              <button class="btn btn-sm btn-secondary" id="prevPage">
                Anterior
              </button>
              <span id="pageInfo"></span>
              <button class="btn btn-sm btn-secondary" id="nextPage">
                Siguiente
              </button>
            </div>
          </section>
        </main>

        <!--<modales>-->
        <!-- Modal de Actividad -->
        <!-- Modal de Actividad -->
        <!-- Modal de Actividad -->
        <div
          class="modal fade"
          id="actividadModal"
          tabindex="-1"
          aria-labelledby="actividadModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content modal-dark position-relative">
              <!-- Fondo visual -->
              <div class="modal-bg-image"></div>

              <!-- HEADER -->
              <div class="modal-header border-0">
                <h5 class="modal-title text-white" id="actividadModalLabel">
                  Detalle de Actividad
                </h5>
                <button
                  type="button"
                  class="btn-close btn-close-white"
                  data-bs-dismiss="modal"
                  aria-label="Cerrar"
                ></button>
              </div>

              <!-- BODY -->
              <div class="modal-body position-relative" style="z-index: 10">
                <p class="text-white">
                  <strong>Proyecto:</strong> <span id="modalProyecto"></span>
                </p>
                <p class="text-white">
                  <strong>Tarea:</strong> <span id="modalTarea"></span>
                </p>
                <p class="text-white">
                  <strong>Tiempo estimado:</strong>
                  <span id="modalTiempo"></span>
                </p>
                <p class="text-white">
                  <strong>Fecha asignada:</strong> <span id="modalFecha"></span>
                </p>

                <!-- Input de entrega -->
                <div class="mt-3">
                  <label for="fileEntrega" class="form-label text-white"
                    >Subir entrega</label
                  >
                  <input
                    type="file"
                    class="form-control form-dark"
                    id="fileEntrega"
                    accept=".pdf,.docx,.pptx,.zip,.rar,.jpg,.png"
                  />
                </div>
              </div>

              <!-- FOOTER -->
              <div
                class="modal-footer border-0 position-relative"
                style="z-index: 10"
              >
                <button
                  type="button"
                  id="btnPrevActividad"
                  class="btn btn-secondary"
                >
                  ← Anterior
                </button>
                <button
                  type="button"
                  id="btnNextActividad"
                  class="btn btn-accent"
                >
                  Siguiente →
                </button>
                <button
                  type="button"
                  id="btnEntregarActividad"
                  class="btn btn-success"
                >
                  Entregar
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- FOOTER -->
        <footer class="footer">
          <div>Universidad de Guayaquil — Ingeniería de Software</div>
          <div class="small muted">
            Diseñado por tu equipo • <span id="yearFooter"></span>
          </div>
        </footer>
        <script src="../assets/js/estudiante/subir_asignacion.js"></script>
        <script src="../assets/js/alertas.js"></script>
        <!-- Incluir CSS y JS de Quill -->
        <link
          href="https://cdn.quilljs.com/1.3.6/quill.snow.css"
          rel="stylesheet"
        />
        <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

        <script>
          var quill = new Quill("#editorDescripcion", {
            theme: "snow",
            placeholder: "Escribe la descripción del proyecto...",
            modules: {
              toolbar: [
                [{ header: [1, 2, false] }],
                ["bold", "italic", "underline"],
                ["link", "image"],
                [{ list: "ordered" }, { list: "bullet" }],
              ],
            },
          });
        </script>
      </div>
    </div>
  </body>
</html>
